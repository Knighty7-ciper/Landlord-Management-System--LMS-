# Property Service Configuration

# Server Configuration
server.port=8080
server.servlet.context-path=/

# Application Configuration
spring.application.name=property-service
spring.profiles.active=development

# Database Configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/landlord_db
spring.datasource.username=${POSTGRES_USER:landlord_user}
spring.datasource.password=${POSTGRES_PASSWORD:landlord_password}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# Connection Pool Configuration (HikariCP)
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.leak-detection-threshold=60000

# Redis Configuration
spring.redis.host=${REDIS_HOST:localhost}
spring.redis.port=${REDIS_PORT:6379}
spring.redis.password=${REDIS_PASSWORD:redis_password}
spring.redis.timeout=2000ms
spring.redis.jedis.pool.max-active=8
spring.redis.jedis.pool.max-idle=8
spring.redis.jedis.pool.min-idle=0

# MongoDB Configuration (for file metadata)
spring.data.mongodb.host=${MONGODB_HOST:localhost}
spring.data.mongodb.port=${MONGODB_PORT:27017}
spring.data.mongodb.database=${MONGODB_DB:property_metadata}
spring.data.mongodb.username=${MONGODB_USER:mongodb_user}
spring.data.mongodb.password=${MONGODB_PASSWORD:mongodb_password}

# AWS S3 Configuration
aws.s3.bucket-name=${AWS_S3_BUCKET:landlord-property-images}
aws.region=${AWS_REGION:us-east-1}
aws.access-key-id=${AWS_ACCESS_KEY_ID:aws_access_key}
aws.secret-access-key=${AWS_SECRET_ACCESS_KEY:aws_secret_key}

# RabbitMQ Configuration
spring.rabbitmq.host=${RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USER:guest}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:guest}
spring.rabbitmq.virtual-host=${RABBITMQ_VHOST:/}
spring.rabbitmq.connection-timeout=30000

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=2KB

# Cache Configuration
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=30m

# Logging Configuration
logging.level.com.landlord.property=INFO
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# Jackson Configuration
spring.jackson.serialization.indent_output=true
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=UTC
spring.jackson.default-property-inclusion=NON_NULL

# Security Configuration
spring.security.oauth2.resourceserver.jwt.issuer-uri=${JWT_ISSUER_URI:http://localhost:8080}
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${JWT_JWK_SET_URI:http://localhost:8080/.well-known/jwks.json}

# Validation Configuration
spring.mvc.async.request-timeout=30000

# CORS Configuration
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:3001}
cors.allowed-methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS,PATCH}
cors.allowed-headers=${CORS_ALLOWED_HEADERS:*}
cors.allow-credentials=${CORS_ALLOW_CREDENTIALS:true}

# Rate Limiting Configuration
rate.limit.requests.per.minute=${RATE_LIMIT_REQUESTS_PER_MINUTE:100}
rate.limit.uploads.per.hour=${RATE_LIMIT_UPLOADS_PER_HOUR:50}

# Property Service Specific Configuration
property.image.upload.max-size=10485760
property.image.upload.allowed-types=jpg,jpeg,png,webp
property.image.thumbnail.max-width=400
property.image.thumbnail.max-height=400
property.cache.ttl.properties=1800
property.cache.ttl.units=900
property.cache.ttl.images=3600

# Pagination Configuration
property.pagination.default-page-size=20
property.pagination.max-page-size=100

# Audit Configuration
audit.enabled=true
audit.retention.days=365

# Feature Flags
feature.units.enabled=true
feature.images.enabled=true
feature.search.enabled=true
feature.analytics.enabled=true

# Health Check Configuration
health.database.enabled=true
health.redis.enabled=true
health.s3.enabled=true
health.rabbitmq.enabled=true

# Monitoring Configuration
monitoring.metrics.enabled=true
monitoring.tracing.enabled=false
monitoring.logs.level=INFO