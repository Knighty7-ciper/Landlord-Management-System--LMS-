# API Gateway Environment Configuration
# Copy this file to .env and update the values according to your environment

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=development
API_GATEWAY_PORT=8080

# =============================================================================
# SERVICE URLs
# =============================================================================
# Backend service URLs
AUTH_SERVICE_URL=http://localhost:3001
PROPERTY_SERVICE_URL=http://localhost:8081

# Multiple service instances (comma-separated for load balancing)
AUTH_SERVICE_URLS=http://localhost:3001,http://localhost:3002
PROPERTY_SERVICE_URLS=http://localhost:8081,http://localhost:8082
USER_SERVICE_URLS=http://localhost:3001

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT Configuration
JWT_SECRET=your-super-secure-jwt-secret-key-change-this-in-production
JWT_EXPIRY=24h

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173

# Enable/disable security features
ENABLE_CORS=true
ENABLE_HSTS=true
ENABLE_CSP=true

# Request size limits
MAX_REQUEST_SIZE=10mb

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis connection settings
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=1000
RATE_LIMIT_AUTH_MAX=10
RATE_LIMIT_PROPERTY_MAX=100
RATE_LIMIT_UPLOAD_MAX=10

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_TTL=300
CACHE_MAX_SIZE=1000
ENABLE_CACHE=true

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=debug
ENABLE_FILE_LOGGING=true
LOG_DIRECTORY=./logs
LOG_MAX_FILES=10
LOG_MAX_FILE_SIZE=10MB

# =============================================================================
# METRICS CONFIGURATION
# =============================================================================
ENABLE_METRICS=true
METRICS_PATH=/metrics

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_RETRIES=3

# =============================================================================
# EXTERNAL SERVICE CONFIGURATION
# =============================================================================
# AWS S3 Configuration (for property images)
AWS_S3_BUCKET_NAME=landlord-management-assets
AWS_S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# Email Service Configuration
EMAIL_SERVICE_URL=http://localhost:3002
EMAIL_API_KEY=your-email-service-api-key

# Notification Service
NOTIFICATION_SERVICE_URL=http://localhost:3003

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL Configuration (for auth service)
DATABASE_URL=postgresql://user:password@localhost:5432/landlord_auth
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=landlord_auth
DATABASE_USERNAME=user
DATABASE_PASSWORD=password

# MongoDB Configuration (for user data)
MONGODB_URL=mongodb://localhost:27017/landlord_users
MONGODB_USERNAME=
MONGODB_PASSWORD=

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================
# Prometheus metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Jaeger tracing
JAEGER_ENABLED=false
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Sentry error tracking
SENTRY_ENABLED=false
SENTRY_DSN=your-sentry-dsn

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_ENABLED=false
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/private.key

# Let's Encrypt configuration
LETSENCRYPT_ENABLED=false
LETSENCRYPT_DOMAIN=your-domain.com
LETSENCRYPT_EMAIL=your-email@example.com

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_MFA_ENABLED=true
FEATURE_AUDIT_LOGGING=true
FEATURE_REQUEST_VALIDATION=true
FEATURE_RESPONSE_COMPRESSION=true
FEATURE_LOAD_BALANCING=true
FEATURE_CIRCUIT_BREAKER=false
FEATURE_RATE_LIMITING=true

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
# Hot reload and debugging
NODE_OPTIONS=--max-old-space-size=4096
DEBUG=api-gateway:*
NODEMON_EXT=ts,js,json

# Test configuration
TEST_DATABASE_URL=postgresql://test_user:test_password@localhost:5432/landlord_test
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# PRODUCTION CONFIGURATION
# =============================================================================
# Production specific settings
TRUST_PROXY=true
COMPRESSION_ENABLED=true
HELMET_ENABLED=true
RATE_LIMIT_STRICT_MODE=false

# Session configuration
SESSION_SECRET=your-session-secret-key
SESSION_TIMEOUT=3600000

# API versioning
API_VERSION_PREFIX=/api/v1
DEFAULT_API_VERSION=1.0

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# Docker configuration
DOCKER_REGISTRY=your-registry.com
DOCKER_IMAGE_TAG=latest

# Kubernetes configuration
KUBERNETES_NAMESPACE=landlord-system
KUBERNETES_SERVICE_ACCOUNT=api-gateway

# Scaling configuration
MIN_REPLICAS=1
MAX_REPLICAS=10
CPU_THRESHOLD=70
MEMORY_THRESHOLD=80

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================
# Backup configuration
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=landlord-backups

# =============================================================================
# INTEGRATION CONFIGURATION
# =============================================================================
# Third-party integrations
STRIPE_API_KEY=your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret

# Payment processing
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret

# Social media integration
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# =============================================================================
# BUSINESS CONFIGURATION
# =============================================================================
# Property management specific settings
MAX_PROPERTY_IMAGES=10
MAX_PROPERTY_SIZE_MB=10
DEFAULT_CURRENCY=USD
DEFAULT_TIMEZONE=America/New_York

# Commission and fee configuration
PLATFORM_FEE_PERCENTAGE=2.5
PAYMENT_PROCESSING_FEE_PERCENTAGE=2.9
MINIMUM_PAYOUT_AMOUNT=100

# =============================================================================
# COMPLIANCE AND LEGAL
# =============================================================================
# Privacy and compliance
GDPR_ENABLED=false
CCPA_ENABLED=false
DATA_RETENTION_DAYS=2555
COOKIE_POLICY_URL=https://your-domain.com/privacy/cookies

# Terms of service
TERMS_OF_SERVICE_URL=https://your-domain.com/terms
PRIVACY_POLICY_URL=https://your-domain.com/privacy

# Support and contact
SUPPORT_EMAIL=support@your-domain.com
SUPPORT_PHONE=+1-800-555-0123
EMERGENCY_CONTACT=emergency@your-domain.com

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================
# Circuit breaker settings
CIRCUIT_BREAKER_ENABLED=false
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# Retry configuration
RETRY_ENABLED=true
RETRY_MAX_ATTEMPTS=3
RETRY_BACKOFF_MS=1000

# Timeout configuration
REQUEST_TIMEOUT_MS=30000
SERVICE_TIMEOUT_MS=15000

# Load balancing algorithms
LOAD_BALANCER_STRATEGY=round_robin
HEALTH_CHECK_WEIGHTED=true

# =============================================================================
# LOCALIZATION
# =============================================================================
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es,fr
TIMEZONE=UTC
DATE_FORMAT=YYYY-MM-DD
TIME_FORMAT=HH:mm:ss

# =============================================================================
# PERFORMANCE OPTIMIZATION
# =============================================================================
# Connection pooling
DB_POOL_SIZE=10
DB_POOL_MIN=2
DB_POOL_MAX=20

# Memory and CPU limits
MAX_MEMORY_USAGE=1024MB
MAX_CPU_USAGE=80

# Async processing
ASYNC_QUEUE_ENABLED=true
ASYNC_WORKERS=5
ASYNC_MAX_JOBS=100